var bloodhound = require('../')
  , fs = require('fs')
  , test = require('tap').test

test('find string requires', function (t) {
  var code = fs.readFileSync(__dirname+'/data/requires.js', 'utf8')
  var wanted = ['a', 'b', 'c', 'd'].sort()
  t.plan(1)
  var found = bloodhound(code).sort()
  t.deepEqual(found, wanted)
})

test('find require nodes', function (t) {
  var code = fs.readFileSync(__dirname+'/data/requires.js', 'utf8')
  var wanted =
  [ {type: 'string', value: 'a'}
  , {type: 'string', value: 'b'}
  , {type: 'string', value: 'c'}
  , {type: 'string', value: 'd'}
  , {type: 'name', value: 'baz'}
  ]
  t.plan(wanted.length)
  var found = bloodhound(code, true)
  for (var i=0; i<wanted.length; i++) {
    t.hasFields(found, wanted)
  }
})
